# aem-async-clientlib

So you want to use `async`, `defer`, `onload` and `crossorigin` with your clientlib, you may have come across Nate Yolles [aem-clientlib-async](https://github.com/nateyolles/aem-clientlib-async). This repo is heavily based on that, just with a different implementation. While Nate's code generates the HTML for the `script`s and `link`s from a string template, the 'Use' class with this code parses the HTML generated from `HtmlLibraryManager` and appends the attributes to the generated tags. This way we do not interfere with what `HtmlLibraryManager` generates, we just append the attributes we need to it. Read more in source for `lazybones-aem-templates/lazybones-aem-clientlib-async/templates/aem-clientlib-async/ClientLibUseObject.java`

> This implementation solves an issue with [aem-clientlib-async](https://github.com/nateyolles/aem-clientlib-async) where the hash for cache busting is not appended to the files name for JS/CSS.

## This repo contains two project:

### async-clientlib
This is the default project and can be added to your own project under the path: `/apps/async-clientlib` (no duplicate)
This project is generated by the lazybones template `lazybones-aem-clientlib-async`
Learn more in the READMe.md for that project

### lazybones-aem-clientlib-async
This is a lazybones template that allows you to generate the same project as `async-clientlib`, only with your own path. This makes it easy to add `aem-async-clientlib` to your own existing project path.

#### How to create `async-clientlib` for your own project with your own path
1. install [lazybones](https://github.com/pledbrook/lazybones)
2. create a new `aem-async-clientlib` lazybones project:

    - execute `lazybones create http://dl.bintray.com/ahmed-musallam/lazybones/aem-clientlib-async-template-1.0.0.zip clientlib-async`
    - Enter the desired path within your project
